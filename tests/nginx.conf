 
#user  nobody;
worker_processes 5;
worker_rlimit_nofile 4096;
debug_points  stop;

error_log  /dev/stderr info;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

pid        /tmp/nhpm-test-nginx.pid;
daemon	    off;
#working_directory core/;

events {
    worker_connections  2000;
}

http {
#	access_log	/dev/null;
	access_log 	/dev/stdout;
	default_type  application/octet-stream;
	sendfile        on;
	keepalive_timeout  65;
	push_authorized_channels_only off;
	server {
		listen       8082;
		root /home/leop/sandbox/nginx_push/tests;
		location /broadcast {
			 location ~ /broadcast/sub/(\w+)$ {
				set $push_channel_id $1;
				push_subscriber;
				push_subscriber_concurrency broadcast;
				push_channel_group broadcast;
			}
			location ~ /broadcast/pub/(\w+)$ {
				set $push_channel_id $1;
				push_publisher;
				push_min_message_buffer_length 5;
				push_max_message_buffer_length 20;
				push_message_timeout 5s;
				push_channel_group broadcast;
			}
		}
	}
}
