 
#user  nobody;
worker_processes 3;

#debug_points  stop;

error_log  logs/error.log debug;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

pid        logs/nginx.pid;
#daemon	    off;
working_directory /home/leop/verk/nginx-testing/core/;


events {
    worker_connections  1000;
}

http {
	include       mime.types;
	default_type  application/octet-stream;
	sendfile        on;
	keepalive_timeout  65;
	push_authorized_channels_only off;
	push_max_channel_id_length 3;
	server {
		listen       8098;
		push_min_message_recipients 1;
		push_min_message_buffer_length 5;
		push_max_message_buffer_length 20;
		location = /listen {
			 set $push_channel_id $arg_channel;
			 push_subscriber;
			 push_subscriber_concurrency broadcast; 
			 push_channel_group steve;
		}
		location /send {
			default_type  text/plain;
			set $push_channel_id $arg_channel;
			push_channel_group steve;
			push_publisher;
			push_message_timeout 1h;
		}
	}
}
